<!DOCTYPE html>
<html>
    <head>
        <title>Tax Calculator</title>
        <link href="https://fonts.googleapis.com/css?family=Borel|Bitter" rel="stylesheet">    
    </head>
    <style>
        
    </style>
    <link rel="stylesheet" href="styles.css">
    <body> 
        <header>
            <h1>Tax calculator</h1>
        </header><br><br>
        <div class = "bodyDiv">
            <label for = "income">Input your taxable income: &#8369;</label>
            <input id = "income" type = "number" min="0" style="text-align:right"> <br><br>

            <span class = "resultSpan">
            <label for = "result">Your tax: </label>
            <input id = "result" type = "text" style="text-align:right" size = "15"readonly> </input></span><br>
        </div>
        <br><br><br>
        <footer>&copy; 2023 Shawny Macrohon&emsp;&emsp;&emsp;<a href="index.html">I want to go home</a></footer>
        <script>
            function taxcal(base, income, ex, rate) {
                let result;
                result = base + ((income - ex)*rate);
                result = result.toFixed(2);
                result = result.toLocaleString('en-US'); 
                return result;
            }

            const input_income=document.getElementById("income");
                    input_income.addEventListener('change', e => {
                    e.currentTarget.value = parseFloat(e.currentTarget.value).toFixed(2)
            });
            
            document.getElementById("income").addEventListener("keyup", 
            ()=>{
                var income, result;
                income = document.getElementById("income").value*1;
                //console.log("pass");

                if(income > 8000000){
                    result = taxcal(2410000, income, 8000000, 0.35);
                    document.getElementById("result").value = "\u20B1" + result;
                }

                else if(income <= 8000000 && income > 2000000){
                    result = taxcal(490000, income, 2000000, 0.32);
                    document.getElementById("result").value = "\u20B1"+result;
                }

                else if(income <= 2000000 && income > 800000){
                    result = taxcal(130000, income, 800000, 0.30);
                    document.getElementById("result").value = "\u20B1"+result;
                }

                else if(income <= 800000 && income > 400000){
                    result = taxcal(30000, income, 400000, 0.25);
                    document.getElementById("result").value = "\u20B1"+result;
                }

                else if(income <= 400000 && income > 250000){
                    result = taxcal(0, income, 250000, 0.20);
                    document.getElementById("result").value = "\u20B1"+result;
                }

                else {
                    result = 0.00;
                    //result = result.toLocaleString('en-US'); 
                    document.getElementById("result").value = "\u20B1"+result.toFixed(2);
                }
                //console.log("passed");
            });

        </script>
    </body>
</html>
